:root {
    --bg:#f1f5f9; --surface:#fff; --text:#0f172a; --sub:#64748b; --border:#e2e8f0;
    --primary:#4f46e5; --danger:#ef4444; --success:#10b981; --warn:#f59e0b;
    --shadow:0 4px 6px -1px rgba(0,0,0,0.05); --rad:16px;
}
body.dark-mode {
    --bg:#0b1120; --surface:#1e293b; --text:#f8fafc; --sub:#94a3b8; --border:rgba(255,255,255,0.1);
    --primary:#818cf8; --danger:#f87171; --success:#34d399;
}
* { box-sizing:border-box; outline:none; }
body { margin:0; font-family:'Inter',sans-serif; background:var(--bg); color:var(--text); height:100vh; display:flex; overflow:hidden; }

/* Layout */
.sidebar { width:260px; background:var(--surface); border-right:1px solid var(--border); display:flex; flex-direction:column; z-index:20; flex-shrink:0; }
.sidebar-header { height:64px; padding:0 24px; display:flex; align-items:center; border-bottom:1px solid var(--border); font-weight:800; color:var(--primary); }
.content-area { flex:1; padding:32px; overflow-y:auto; display:flex; flex-direction:column; gap:24px; }
.card-container { display:grid; grid-template-columns:repeat(auto-fit,minmax(340px,1fr)); gap:24px; width:100%; }

/* Components */
.admin-card { background:var(--surface); border-radius:var(--rad); border:1px solid var(--border); padding:24px; box-shadow:var(--shadow); display:flex; flex-direction:column; gap:20px; transition:.2s; }
.admin-card:hover { transform:translateY(-2px); border-color:var(--primary); }
.admin-card h3 { margin:0; padding-bottom:16px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px; }

input, button, select { height:46px; border-radius:10px; border:1px solid var(--border); padding:0 16px; background:var(--bg); color:var(--text); width:100%; font-size:.95rem; transition:.2s; }
input:focus { border-color:var(--primary); }
button { font-weight:600; cursor:pointer; display:flex; justify-content:center; align-items:center; border:none; gap:8px; }
button:active { transform:scale(.98); }

.btn-hero { background:var(--primary); color:#fff; font-size:1.2rem; height:64px; }
.btn-secondary { background:transparent; border:1px solid var(--border); color:var(--sub); }
.btn-secondary:hover { border-color:var(--primary); color:var(--primary); }
.btn-reset { color:var(--sub); background:transparent; border:none; margin-top:auto; }
.btn-reset:hover { color:var(--danger); background:rgba(239,68,68,0.1); }

/* List & Grid */
.list-container { flex:1; border:1px solid var(--border); border-radius:10px; overflow-y:auto; max-height:400px; background:var(--bg); }
.list-item { padding:12px 16px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; background:var(--surface); }
.user-card-item { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:16px; display:flex; align-items:center; gap:12px; }

/* [FIX] Chart Styles (修正圖表手機版溢出問題) */
#hourly-chart {
    display: flex;
    align-items: flex-end;
    height: 180px;
    gap: 8px; /* 每個長條之間的間距 */
    margin-top: 10px;
    
    /* 關鍵修正：允許水平捲動 */
    overflow-x: auto; 
    padding-bottom: 10px; /* 預留捲動條空間 */
    width: 100%;
    -webkit-overflow-scrolling: touch; /* iOS 滑動優化 */
}

.chart-col {
    /* 關鍵修正：固定寬度，不允許壓縮 */
    flex: 0 0 28px; 
    min-width: 28px; 
    
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    cursor: pointer;
    position: relative;
}

.chart-bar {
    width: 100%;
    background: var(--primary);
    opacity: 0.25;
    border-radius: 4px 4px 0 0;
    transition: all 0.2s;
    min-height: 4px; /* 確保 0 數值時也有一點高度可視 */
}

.chart-col:hover .chart-bar { opacity: 1; transform: scaleY(1.05); background: var(--primary); }
.chart-col.current .chart-bar { background: var(--warn); opacity: 0.8; }
.chart-val { font-size: 0.7rem; font-weight: 700; margin-bottom: 4px; color: var(--text); }
.chart-label { font-size: 0.65rem; color: var(--sub); margin-top: 6px; font-family: monospace; }

/* Mobile */
@media (max-width:768px) {
    body { flex-direction:column; overflow:auto; height:auto; }
    .sidebar { width:100%; height:60px; flex-direction:row; position:fixed; top:0; padding:0 10px; overflow-x:auto; border-right:none; border-bottom:1px solid var(--border); white-space:nowrap; }
    .sidebar-header { display:none; }
    .content-area { padding:80px 16px 40px; } /* 上方 padding 避開固定導航 */
    .card-container { display:flex; flex-direction:column; }
    .admin-card { min-height: auto; }
}
